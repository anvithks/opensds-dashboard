<p-growl [value]="msgs" [sticky]="false" [life]="6000"></p-growl>
<div class="delfin-masking-views-page">
    <div class="table-toolbar">
        <div class="left">
            
        </div>
        <div class="right">
            <div class="ui-inputsearch">
                <input type="text" #searchAll pInputText placeholder="{{i18n.keyID['sds_block_volume_search']}}">
                <button pButton type="button" icon="fa-search"></button>
            </div>
            <button class="" title="Refresh lists" pButton type="button" (click)="refreshAllLists()" icon="fa-refresh"></button>
        </div>
    </div>
    <div class="ui-grid-row">
        <p-dataTable  
            [value]="allMaskingViews" 
            [immutable]="false" 
            [globalFilter]="searchAll" 
            [rows]="10" 
            [expandableRows]="true" 
            [paginator]="true" 
            [pageLinks]="3" 
            [rowsPerPageOptions]="[10,20,50,100]" 
            #at>
            <p-column expander="true" styleClass="col-icon" [style]="{'width': '3%'}"></p-column>
            <p-column field="name" header="Masking View Name"  [sortable]="true">
                <ng-template pTemplate="body" let-maskingView="rowData">
                    <a [routerLink]="" (click)="showMaskingViewDetails(maskingView)" title="{{maskingView.name}}">{{maskingView.name}}</a>
                </ng-template>
            </p-column>
            <p-column header="LUN Count" [style]="{'width': '8%'}" #LUNCount>
                <ng-template pTemplate="body" let-maskingView="rowData">
                    {{maskingView.volumesCount ? maskingView.volumesCount : 0}}
                </ng-template>
            </p-column> 
            <p-column header="Inititator Count" [style]="{'width': '8%'}">
                <ng-template pTemplate="body" let-maskingView="rowData">
                    {{maskingView.storageHostInitiatorsCount ? maskingView.storageHostInitiatorsCount : 0}}
                </ng-template>
            </p-column>  
            <p-column header="Ports Count" [style]="{'width': '8%'}">
                <ng-template pTemplate="body" let-maskingView="rowData">
                    {{maskingView.portsCount ? maskingView.portsCount : 0}}
                </ng-template>
            </p-column>   
            <p-column header="Operations">
                <ng-template pTemplate="body" let-maskingView="rowData" let-i="rowIndex">
                    <!-- <a [routerLink]="['/maskingViewDetails/' + maskingView.name]" >View Details<i class="fa fa-chart"></i></a>                     -->
                </ng-template>
            </p-column>
        </p-dataTable>
    </div>
</div>
<p-sidebar [(visible)]="showRightSidebar" (onHide)="closeSidebar()" position="right" styleClass="details-sidebar-panel ui-sidebar-lg" [autoZIndex]="true" [baseZIndex]="1000">
    <div class="right-sidebar-content-wrapper">
        <div class="right-sidebar-header">
            <h1 *ngIf="showDetails" style="font-weight:normal">Masking View Details</h1>
        </div>
        <div class="right-sidebar-body">
            <!-- <div *ngIf="showDetails" class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
                <div class="ui-grid-row volume-basic-item-class">
                    <div class="ui-grid-col-2">
                        {{label.hostName}}:
                    </div>
                    <div class="ui-grid-col-2 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.hostName}}
                    </div>
                    <div class="ui-grid-col-2">
                        {{label.status}}:
                    </div>
                    <div class="ui-grid-col-2 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.status? selectedHost.status : '--'}}
                    </div>
                    <div class="ui-grid-col-2">
                        {{label.createdAt}}:
                    </div>
                    <div class="ui-grid-col-3 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.createdAt ? (selectedHost.createdAt | date:'long') : '--'}}
                    </div>
                        
                </div>
                <div class="ui-grid-row volume-basic-item-class">
                    <div class="ui-grid-col-2">
                        {{label.ip}}:
                    </div>
                    <div class="ui-grid-col-2 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.ip}}
                    </div>
                    <div class="ui-grid-col-2">
                        {{label.accessMode}}:
                    </div>
                    <div class="ui-grid-col-2 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.accessMode}}
                    </div>
                    <div class="ui-grid-col-2">
                        {{label.updatedAt}}:
                    </div>
                    <div class="ui-grid-col-3 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.updatedAt ? (selectedHost.updatedAt | date:'long') : '--'}}
                    </div>
                    
                </div>
                <div class="ui-grid-row volume-basic-item-class">
                    <div class="ui-grid-col-2">
                        {{label.port}}:
                    </div>
                    <div class="ui-grid-col-2 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.port ? selectedHost.port : '--'}}
                    </div>
                    <div class="ui-grid-col-2">
                        {{label.availabilityZones}}:
                    </div>
                    <div class="ui-grid-col-2 volume-basic-item-value-color">
                        {{selectedHost && selectedHost.availabilityZones}}
                    </div>
                    
                    <div class="ui-grid-col-2">
                        {{label.osType}}:
                    </div>
                    <div class="ui-grid-col-3 volume-basic-item-value-color">
                        {{selectedHost &&selectedHost.osType}}
                    </div>
                </div>
            </div>
            <p-tabView *ngIf="showDetails" styleClass="ui-tabview-large">
                <p-tabPanel header="Volumes">
                    <p-dataTable [value]="selectedHost && selectedHost.volumes">
                        <p-column field="name" header="Volume Name"></p-column>
                    </p-dataTable>
                </p-tabPanel>
                <p-tabPanel header="Initiators">
                    <p-dataTable [value]="selectedHost && selectedHost.initiators">
                        <p-column field="portName" header="Port Name"></p-column>
                        <p-column field="protocol" header="Protocol"></p-column>
                    </p-dataTable>
                </p-tabPanel>
            </p-tabView> -->
        </div>
        <div class="right-sidebar-footer">
            
        </div>
    </div>
</p-sidebar>
